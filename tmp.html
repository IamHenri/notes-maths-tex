<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Cercle unité interactif</title>
<style>
  body { display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
  canvas { border: 1px solid #ccc; margin-top: 20px; background: #fdfdfd; }
  #info { margin-top: 10px; font-size: 1.1em; }
</style>
</head>
<body>

<h2>Cercle unité interactif</h2>
<canvas id="cercle" width="420" height="420"></canvas>
<div id="info">x = 1.0000, y = 0.0000, angle = 0.0000 rad</div>

<script>
const canvas = document.getElementById("cercle");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

const center = { x: canvas.width / 2, y: canvas.height / 2 };
const radius = 150;
let angle = 0;
let dragging = false;

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Axes
  ctx.beginPath();
  ctx.moveTo(0, center.y);
  ctx.lineTo(canvas.width, center.y);
  ctx.moveTo(center.x, 0);
  ctx.lineTo(center.x, canvas.height);
  ctx.strokeStyle = "#bbb";
  ctx.lineWidth = 1;
  ctx.stroke();

  // Cercle unité
  ctx.beginPath();
  ctx.arc(center.x, center.y, radius, 0, 2 * Math.PI);
  ctx.strokeStyle = "#333";
  ctx.lineWidth = 2;
  ctx.stroke();

  // Coordonnées du point
  const x = Math.cos(angle);
  const y = Math.sin(angle);
  const px = center.x + x * radius;
  const py = center.y - y * radius;

  // Traits de projection (vers les axes)
  ctx.setLineDash([5, 3]);
  ctx.beginPath();
  ctx.moveTo(px, center.y);
  ctx.lineTo(px, py);
  ctx.moveTo(center.x, py);
  ctx.lineTo(px, py);
  ctx.strokeStyle = "#888";
  ctx.lineWidth = 1;
  ctx.stroke();
  ctx.setLineDash([]);

  // Point sur le cercle
  ctx.beginPath();
  ctx.arc(px, py, 6, 0, 2 * Math.PI);
  ctx.fillStyle = "red";
  ctx.fill();

  // Texte de l'angle : gauche si x > 0, droite sinon
  ctx.fillStyle = "#000";
  ctx.font = "14px monospace";
  ctx.textAlign = x > 0 ? "right" : "left";
  const offset = 10 * (x > 0 ? -1 : 1);
  ctx.fillText(`θ = ${angle.toFixed(4)} rad`, px + offset, py - 10);

  // Texte des coordonnées sur les axes
  ctx.fillStyle = "#006";
  ctx.textAlign = "center";
  ctx.fillText(`x = ${x.toFixed(4)}`, px, center.y + 15);

  ctx.textAlign = "left";
  ctx.fillText(`y = ${y.toFixed(4)}`, center.x + 10, py);

  // Mise à jour en dessous
  info.textContent = `x = ${x.toFixed(4)}, y = ${y.toFixed(4)}, angle = ${angle.toFixed(4)} rad`;
}

// Gestion de la souris
canvas.addEventListener("mousedown", e => {
  dragging = true;
  updateAngle(e);
});
canvas.addEventListener("mousemove", e => {
  if (dragging) updateAngle(e);
});
canvas.addEventListener("mouseup", () => dragging = false);
canvas.addEventListener("mouseleave", () => dragging = false);

function updateAngle(e) {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left - center.x;
  const y = center.y - (e.clientY - rect.top);
  angle = Math.atan2(y, x);
  draw();
}

// Init
draw();
</script>

</body>
</html>

