<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cours Complet de Probabilit√©s</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(', '\\)'], ['$', '$']], displayMath: [['$$', '$$'], ['\\[', '\\]']] },
      options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }
    };
  </script>

  <style>
    /* ===== IMPORTS ===== */
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+3:wght@300;400;600&family=JetBrains+Mono:wght@400;600&display=swap');

    /* ===== VARIABLES ===== */
    :root {
      --bleu: #1a4d8f;
      --orange: #e67e22;
      --vert: #27ae60;
      --gris: #555;
      --bg: #f9fafc;
      --bg-card: #ffffff;
      --text: #1c1c2e;
      --text-light: #5a5a7a;
      --border: #e0e4f0;
      --shadow: 0 4px 24px rgba(26,77,143,0.08);
    }

    /* ===== RESET & BASE ===== */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Source Sans 3', sans-serif;
      background: var(--bg);
      color: var(--text);
      font-size: 17px;
      line-height: 1.75;
    }

    /* ===== HEADER ===== */
    header {
      background: linear-gradient(135deg, #0d2b5e 0%, #1a4d8f 60%, #2563b0 100%);
      color: white;
      padding: 60px 40px 50px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    header::before {
      content: '';
      position: absolute; inset: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2.8rem;
      font-weight: 700;
      letter-spacing: -0.5px;
      position: relative;
    }
    header p {
      margin-top: 12px;
      font-size: 1.1rem;
      opacity: 0.85;
      position: relative;
    }
    .badge-niveau {
      display: inline-block;
      margin-top: 18px;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 20px;
      padding: 4px 18px;
      font-size: 0.85rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      position: relative;
    }

    /* ===== NAV TABLE OF CONTENTS ===== */
    nav.toc {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      max-width: 900px;
      margin: 40px auto 0;
      padding: 28px 36px;
      box-shadow: var(--shadow);
    }
    nav.toc h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      color: var(--bleu);
      margin-bottom: 16px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 10px;
    }
    nav.toc ol {
      padding-left: 20px;
    }
    nav.toc li {
      margin: 6px 0;
    }
    nav.toc a {
      color: var(--bleu);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.2s;
    }
    nav.toc a:hover { color: var(--orange); }
    nav.toc ol ol {
      padding-left: 18px;
      margin-top: 4px;
    }
    nav.toc ol ol li a {
      font-weight: 400;
      color: var(--text-light);
      font-size: 0.95rem;
    }

    /* ===== LAYOUT ===== */
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 30px 24px 80px;
    }

    /* ===== SECTION TITLES ===== */
    .chapitre-titre {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      color: var(--bleu);
      margin: 60px 0 8px;
      padding-top: 20px;
      border-top: 3px solid var(--bleu);
    }
    .sous-titre {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      color: var(--text);
      margin: 36px 0 12px;
    }
    p { margin-bottom: 14px; }

    /* ===== STYLES UTILISATEUR ===== */
    .definition {
      background: #eef5ff;
      padding: 16px 20px;
      border-left: 5px solid #1a4d8f;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    .definition strong { color: #1a4d8f; }

    .theoreme {
      background: #fff4e6;
      padding: 16px 20px;
      border-left: 5px solid #e67e22;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    .theoreme strong { color: #e67e22; }

    .propriete {
      background: #eafaf1;
      padding: 16px 20px;
      border-left: 5px solid #27ae60;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    .propriete strong { color: #27ae60; }

    .exemple {
      background: #f4f4f4;
      padding: 16px 20px;
      border-left: 5px solid #555;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    .exemple strong { color: #333; }

    /* ===== EXERCICES ===== */
    .exercice {
      background: #fff;
      border: 1.5px solid #c7d8f5;
      border-radius: 10px;
      padding: 20px 24px;
      margin: 24px 0;
      box-shadow: 0 2px 12px rgba(26,77,143,0.06);
    }
    .exercice .ex-titre {
      font-family: 'Playfair Display', serif;
      font-size: 1.05rem;
      color: var(--bleu);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .exercice .ex-titre::before {
      content: '‚úèÔ∏è';
      font-size: 1.1rem;
    }
    .corrige {
      display: none;
      background: #f0fff6;
      border-left: 4px solid var(--vert);
      border-radius: 0 8px 8px 0;
      padding: 14px 18px;
      margin-top: 14px;
    }
    .btn-corrige {
      background: var(--bleu);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 7px 18px;
      font-size: 0.9rem;
      cursor: pointer;
      margin-top: 12px;
      font-family: 'Source Sans 3', sans-serif;
      transition: background 0.2s;
    }
    .btn-corrige:hover { background: #1356a8; }

    /* ===== FORMULES MISES EN AVANT ===== */
    .formule-box {
      background: linear-gradient(135deg, #0d2b5e11, #1a4d8f0a);
      border: 1.5px solid #c7d8f5;
      border-radius: 10px;
      padding: 20px;
      margin: 18px 0;
      text-align: center;
      font-size: 1.1rem;
    }

    /* ===== CANVAS CHARTS ===== */
    .chart-container {
      background: white;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin: 24px 0;
      box-shadow: var(--shadow);
    }
    .chart-container canvas { max-height: 320px; }
    .chart-legende {
      font-size: 0.88rem;
      color: var(--text-light);
      text-align: center;
      margin-top: 8px;
      font-style: italic;
    }

    /* ===== ATTENTION / REMARQUE ===== */
    .attention {
      background: #fff8f0;
      border: 1.5px solid #f39c12;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 16px 0;
    }
    .attention::before { content: '‚ö†Ô∏è '; font-weight: bold; }

    .remarque {
      background: #f0f4ff;
      border: 1.5px solid #91b0e8;
      border-radius: 8px;
      padding: 14px 18px;
      margin: 16px 0;
    }
    .remarque::before { content: 'üí° '; font-weight: bold; }

    /* ===== TABLE ===== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 18px 0;
      font-size: 0.95rem;
    }
    th {
      background: var(--bleu);
      color: white;
      padding: 10px 14px;
      text-align: left;
    }
    td {
      padding: 9px 14px;
      border-bottom: 1px solid var(--border);
    }
    tr:nth-child(even) td { background: #f3f7ff; }

    /* ===== CODE ===== */
    code {
      font-family: 'JetBrains Mono', monospace;
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.9em;
    }

    /* ===== S√âPARATEUR ===== */
    hr.section-sep {
      border: none;
      border-top: 2px dashed var(--border);
      margin: 50px 0;
    }

    /* ===== FOOTER ===== */
    footer {
      text-align: center;
      padding: 30px;
      color: var(--text-light);
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 600px) {
      header h1 { font-size: 2rem; }
      main { padding: 20px 14px 60px; }
      nav.toc { padding: 20px; }
    }
  </style>
</head>
<body>

<header>
  <h1>Cours Complet de Probabilit√©s</h1>
  <p>Des fondements √† la loi normale et au th√©or√®me central limite</p>
  <span class="badge-niveau">Niveau lyc√©e ‚Üí sup√©rieur</span>
</header>

<main>

<!-- TABLE DES MATI√àRES -->
<nav class="toc">
  <h2>üìö Table des mati√®res</h2>
  <ol>
    <li><a href="#ch1">Notions fondamentales</a>
      <ol>
        <li><a href="#ch1-1">Exp√©rience al√©atoire et univers</a></li>
        <li><a href="#ch1-2">√âv√©nements</a></li>
        <li><a href="#ch1-3">D√©finition de la probabilit√©</a></li>
        <li><a href="#ch1-4">Propri√©t√©s fondamentales</a></li>
      </ol>
    </li>
    <li><a href="#ch2">Calcul des probabilit√©s</a>
      <ol>
        <li><a href="#ch2-1">Probabilit√© conditionnelle</a></li>
        <li><a href="#ch2-2">Ind√©pendance</a></li>
        <li><a href="#ch2-3">Formule des probabilit√©s totales</a></li>
        <li><a href="#ch2-4">Th√©or√®me de Bayes</a></li>
      </ol>
    </li>
    <li><a href="#ch3">Variables al√©atoires discr√®tes</a>
      <ol>
        <li><a href="#ch3-1">D√©finition et loi de probabilit√©</a></li>
        <li><a href="#ch3-2">Esp√©rance et variance</a></li>
        <li><a href="#ch3-3">Loi de Bernoulli et loi binomiale</a></li>
        <li><a href="#ch3-4">Loi de Poisson</a></li>
      </ol>
    </li>
    <li><a href="#ch4">Variables al√©atoires continues</a>
      <ol>
        <li><a href="#ch4-1">Densit√© de probabilit√©</a></li>
        <li><a href="#ch4-2">Fonction de r√©partition</a></li>
        <li><a href="#ch4-3">Loi uniforme</a></li>
        <li><a href="#ch4-4">Loi exponentielle</a></li>
      </ol>
    </li>
    <li><a href="#ch5">Loi normale</a>
      <ol>
        <li><a href="#ch5-1">D√©finition et param√®tres</a></li>
        <li><a href="#ch5-2">Loi normale centr√©e r√©duite</a></li>
        <li><a href="#ch5-3">Calculs de probabilit√©s</a></li>
      </ol>
    </li>
    <li><a href="#ch6">Th√©or√®me central limite</a>
      <ol>
        <li><a href="#ch6-1">√ânonc√© et intuition</a></li>
        <li><a href="#ch6-2">Applications pratiques</a></li>
      </ol>
    </li>
  </ol>
</nav>

<!-- ============================================================ -->
<!-- CHAPITRE 1 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch1">Chapitre 1 ‚Äî Notions fondamentales</h2>

<h3 class="sous-titre" id="ch1-1">1.1 Exp√©rience al√©atoire et univers</h3>

<p>Une <strong>exp√©rience al√©atoire</strong> est une exp√©rience dont on ne peut pas pr√©dire le r√©sultat √† l'avance, m√™me si les conditions sont parfaitement connues. C'est l'opposition √† l'exp√©rience d√©terministe.</p>

<div class="exemple">
  <strong>Exemples d'exp√©riences al√©atoires :</strong><br>
  ‚Äî Lancer un d√© √† six faces.<br>
  ‚Äî Tirer une carte d'un jeu de 52 cartes.<br>
  ‚Äî Mesurer la dur√©e de vie d'une ampoule.<br>
  ‚Äî Observer la pluie demain √† Strasbourg.
</div>

<div class="definition">
  <strong>D√©finition ‚Äî Univers (espace fondamental)</strong><br>
  L'<em>univers</em> \(\Omega\) d'une exp√©rience al√©atoire est l'ensemble de <strong>tous les r√©sultats possibles</strong> de cette exp√©rience. Chaque √©l√©ment \(\omega \in \Omega\) est appel√© <em>issue</em> ou <em>√©ventualit√©</em>.
</div>

<div class="exemple">
  <strong>Exemples d'univers :</strong><br>
  ‚Äî Lancer d'un d√© : \(\Omega = \{1, 2, 3, 4, 5, 6\}\)<br>
  ‚Äî Lancer d'une pi√®ce : \(\Omega = \{P, F\}\) (Pile ou Face)<br>
  ‚Äî Dur√©e de vie d'une ampoule : \(\Omega = [0, +\infty[\)
</div>

<h3 class="sous-titre" id="ch1-2">1.2 √âv√©nements</h3>

<div class="definition">
  <strong>D√©finition ‚Äî √âv√©nement</strong><br>
  Un <em>√©v√©nement</em> est une partie (sous-ensemble) \(A \subseteq \Omega\). On dit qu'un √©v√©nement \(A\) est <em>r√©alis√©</em> si l'issue \(\omega\) obtenue appartient √† \(A\).
  <br><br>
  Cas particuliers :
  <ul style="margin-top:8px; padding-left:20px;">
    <li><strong>√âv√©nement certain</strong> : \(\Omega\) lui-m√™me (toujours r√©alis√©).</li>
    <li><strong>√âv√©nement impossible</strong> : \(\emptyset\) (jamais r√©alis√©).</li>
    <li><strong>√âv√©nement √©l√©mentaire</strong> : un singleton \(\{\omega\}\).</li>
  </ul>
</div>

<p>Les √©v√©nements se combinent √† l'aide des <strong>op√©rations ensemblistes</strong> :</p>

<table>
  <tr><th>Notation</th><th>Nom</th><th>Signification</th></tr>
  <tr><td>\(A \cup B\)</td><td>R√©union</td><td>\(A\) ou \(B\) (ou les deux)</td></tr>
  <tr><td>\(A \cap B\)</td><td>Intersection</td><td>\(A\) et \(B\) simultan√©ment</td></tr>
  <tr><td>\(\bar{A}\)</td><td>Compl√©mentaire</td><td>Non-\(A\)</td></tr>
  <tr><td>\(A \setminus B\)</td><td>Diff√©rence</td><td>\(A\) sans \(B\)</td></tr>
</table>

<div class="remarque">
  Deux √©v√©nements \(A\) et \(B\) sont dits <strong>incompatibles</strong> (ou <em>mutuellement exclusifs</em>) si \(A \cap B = \emptyset\) : ils ne peuvent pas se r√©aliser en m√™me temps.
</div>

<h3 class="sous-titre" id="ch1-3">1.3 D√©finition de la probabilit√©</h3>

<div class="definition">
  <strong>D√©finition axiomatique (Kolmogorov, 1933)</strong><br>
  Une <em>probabilit√©</em> sur \(\Omega\) est une fonction \(P\) qui associe √† chaque √©v√©nement \(A\) un r√©el \(P(A)\) v√©rifiant :
  <ol style="margin-top:10px; padding-left:22px;">
    <li>\(P(A) \geq 0\) pour tout √©v√©nement \(A\) &nbsp;&nbsp;(<em>positivit√©</em>)</li>
    <li>\(P(\Omega) = 1\) &nbsp;&nbsp;(<em>normalisation</em>)</li>
    <li>Si \(A\) et \(B\) sont incompatibles, alors \(P(A \cup B) = P(A) + P(B)\) &nbsp;&nbsp;(<em>additivit√©</em>)</li>
  </ol>
</div>

<p>Dans le cas d'un univers <strong>fini et √©quiprobable</strong> (chaque issue a la m√™me probabilit√©), on obtient la formule classique :</p>

<div class="formule-box">
  $$P(A) = \frac{\text{Nombre de cas favorables √† } A}{\text{Nombre total de cas}} = \frac{|A|}{|\Omega|}$$
</div>

<div class="exemple">
  <strong>Exemple ‚Äî D√© √©quilibr√© :</strong><br>
  On lance un d√©. Soit \(A =\) ¬´ obtenir un nombre pair ¬ª \(= \{2, 4, 6\}\).<br>
  \(|\Omega| = 6\), \(|A| = 3\), donc \(P(A) = \dfrac{3}{6} = \dfrac{1}{2}\).
</div>

<h3 class="sous-titre" id="ch1-4">1.4 Propri√©t√©s fondamentales</h3>

<div class="propriete">
  <strong>Propri√©t√©s de base</strong><br>
  Pour tous √©v√©nements \(A\), \(B\) :
  $$P(\emptyset) = 0 \qquad P(\bar{A}) = 1 - P(A) \qquad 0 \leq P(A) \leq 1$$
  $$P(A \cup B) = P(A) + P(B) - P(A \cap B) \quad \text{(formule de Poincar√©)}$$
</div>

<div class="exemple">
  <strong>Exemple ‚Äî Carte tir√©e d'un jeu de 52 :</strong><br>
  Soit \(A =\) ¬´ carte rouge ¬ª et \(B =\) ¬´ figure (valet, dame, roi) ¬ª.<br>
  \(P(A) = \frac{26}{52} = \frac{1}{2}\),&nbsp; \(P(B) = \frac{12}{52} = \frac{3}{13}\),&nbsp; \(P(A \cap B) = \frac{6}{52} = \frac{3}{26}\).<br>
  Donc \(P(A \cup B) = \frac{1}{2} + \frac{3}{13} - \frac{3}{26} = \frac{13+6-3}{26} = \frac{16}{26} = \frac{8}{13}\).
</div>

<!-- Exercice 1 -->
<div class="exercice">
  <div class="ex-titre">Exercice 1.1 ‚Äî D√© et √©v√©nements</div>
  <p>On lance un d√© √©quilibr√© √† 6 faces. On d√©finit les √©v√©nements :<br>
  \(A =\) ¬´ obtenir un multiple de 3 ¬ª et \(B =\) ¬´ obtenir un nombre sup√©rieur ou √©gal √† 4 ¬ª.</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>D√©crire \(A\), \(B\), \(A \cap B\), \(A \cup B\) et \(\bar{A}\).</li>
    <li>Calculer \(P(A)\), \(P(B)\), \(P(A \cap B)\), \(P(A \cup B)\), \(P(\bar{A})\).</li>
    <li>V√©rifier la formule de Poincar√©.</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    <strong>1. Ensembles :</strong><br>
    \(A = \{3, 6\}\) &nbsp;|&nbsp; \(B = \{4, 5, 6\}\) &nbsp;|&nbsp; \(A \cap B = \{6\}\) &nbsp;|&nbsp; \(A \cup B = \{3,4,5,6\}\) &nbsp;|&nbsp; \(\bar{A} = \{1,2,4,5\}\)<br><br>
    <strong>2. Probabilit√©s :</strong><br>
    \(P(A) = \dfrac{2}{6} = \dfrac{1}{3}\) &nbsp;&nbsp; \(P(B) = \dfrac{3}{6} = \dfrac{1}{2}\) &nbsp;&nbsp; \(P(A \cap B) = \dfrac{1}{6}\) &nbsp;&nbsp; \(P(\bar{A}) = \dfrac{4}{6} = \dfrac{2}{3}\)<br><br>
    <strong>3. V√©rification Poincar√© :</strong><br>
    \(P(A \cup B) = P(A) + P(B) - P(A \cap B) = \dfrac{1}{3} + \dfrac{1}{2} - \dfrac{1}{6} = \dfrac{2+3-1}{6} = \dfrac{4}{6} = \dfrac{2}{3}\) ‚úì<br>
    En effet \(|A \cup B| = 4\) donc \(P(A \cup B) = \dfrac{4}{6} = \dfrac{2}{3}\) ‚úì
  </div>
</div>

<!-- Exercice 2 -->
<div class="exercice">
  <div class="ex-titre">Exercice 1.2 ‚Äî Cartes √† jouer</div>
  <p>On tire une carte au hasard dans un jeu de 52 cartes. Calculer la probabilit√© de :<br>
  (a) tirer un as &nbsp;|&nbsp; (b) tirer un c≈ìur &nbsp;|&nbsp; (c) tirer un as de c≈ìur &nbsp;|&nbsp; (d) tirer un as <em>ou</em> un c≈ìur.</p>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    (a) \(P(\text{as}) = \dfrac{4}{52} = \dfrac{1}{13}\)<br>
    (b) \(P(\text{c≈ìur}) = \dfrac{13}{52} = \dfrac{1}{4}\)<br>
    (c) \(P(\text{as de c≈ìur}) = \dfrac{1}{52}\)<br>
    (d) \(P(\text{as ou c≈ìur}) = \dfrac{4}{52} + \dfrac{13}{52} - \dfrac{1}{52} = \dfrac{16}{52} = \dfrac{4}{13}\)
  </div>
</div>

<hr class="section-sep">

<!-- ============================================================ -->
<!-- CHAPITRE 2 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch2">Chapitre 2 ‚Äî Calcul des probabilit√©s</h2>

<h3 class="sous-titre" id="ch2-1">2.1 Probabilit√© conditionnelle</h3>

<p>Souvent, une information partielle modifie notre incertitude. La <strong>probabilit√© conditionnelle</strong> mod√©lise cette mise √† jour.</p>

<div class="definition">
  <strong>D√©finition ‚Äî Probabilit√© conditionnelle</strong><br>
  Soit \(B\) un √©v√©nement tel que \(P(B) > 0\). La probabilit√© de \(A\) <em>sachant</em> \(B\), not√©e \(P(A \mid B)\), est d√©finie par :
  $$P(A \mid B) = \frac{P(A \cap B)}{P(B)}$$
</div>

<div class="exemple">
  <strong>Exemple :</strong> On lance un d√©. On sait que le r√©sultat est pair (\(B = \{2,4,6\}\)). Quelle est la probabilit√© d'obtenir un 4 ?<br>
  \(A = \{4\}\), \(P(A \cap B) = P(\{4\}) = \frac{1}{6}\), \(P(B) = \frac{1}{2}\).<br>
  \(P(A \mid B) = \dfrac{1/6}{1/2} = \dfrac{1}{3}\).
  <br><br>
  Intuitivement : parmi \(\{2, 4, 6\}\), seul \(4\) est favorable, donc probabilit√© \(\frac{1}{3}\). ‚úì
</div>

<div class="propriete">
  <strong>R√®gle de multiplication</strong><br>
  De la d√©finition, on tire imm√©diatement :
  $$P(A \cap B) = P(A \mid B) \cdot P(B) = P(B \mid A) \cdot P(A)$$
  Plus g√©n√©ralement (r√®gle de la cha√Æne) :
  $$P(A_1 \cap A_2 \cap \cdots \cap A_n) = P(A_1) \cdot P(A_2 \mid A_1) \cdot P(A_3 \mid A_1 \cap A_2) \cdots$$
</div>

<h3 class="sous-titre" id="ch2-2">2.2 Ind√©pendance</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Ind√©pendance</strong><br>
  Deux √©v√©nements \(A\) et \(B\) sont dits <em>ind√©pendants</em> si et seulement si :
  $$P(A \cap B) = P(A) \cdot P(B)$$
  √âquivalent (quand \(P(B) > 0\)) : \(P(A \mid B) = P(A)\). La r√©alisation de \(B\) ne modifie pas la probabilit√© de \(A\).
</div>

<div class="attention">
  <strong>Ind√©pendance ‚â† Incompatibilit√© !</strong> Deux √©v√©nements incompatibles (non-simultan√©s) avec probabilit√©s non nulles sont <em>d√©pendants</em> : si l'un se r√©alise, l'autre ne peut pas, donc la r√©alisation de l'un change la probabilit√© de l'autre.
</div>

<div class="exemple">
  <strong>Exemple :</strong> On lance deux pi√®ces. Soit \(A =\) ¬´ pile au 1er lanc√© ¬ª, \(B =\) ¬´ face au 2e lanc√© ¬ª.<br>
  \(\Omega = \{PP, PF, FP, FF\}\), chaque issue a probabilit√© \(\frac{1}{4}\).<br>
  \(P(A) = \frac{2}{4} = \frac{1}{2}\), \(P(B) = \frac{2}{4} = \frac{1}{2}\), \(P(A \cap B) = P(\{PF\}) = \frac{1}{4}\).<br>
  \(P(A) \cdot P(B) = \frac{1}{2} \cdot \frac{1}{2} = \frac{1}{4} = P(A \cap B)\) ‚úì ‚Äî Les lancers sont bien ind√©pendants.
</div>

<h3 class="sous-titre" id="ch2-3">2.3 Formule des probabilit√©s totales</h3>

<div class="theoreme">
  <strong>Th√©or√®me ‚Äî Probabilit√©s totales</strong><br>
  Soit \((B_1, B_2, \ldots, B_n)\) une <em>partition</em> de \(\Omega\) : des √©v√©nements deux √† deux incompatibles dont la r√©union est \(\Omega\), avec \(P(B_i) > 0\). Alors pour tout √©v√©nement \(A\) :
  $$P(A) = \sum_{i=1}^{n} P(A \mid B_i) \cdot P(B_i)$$
</div>

<div class="exemple">
  <strong>Exemple ‚Äî Urnes :</strong> Deux urnes : U1 contient 3 boules rouges et 2 bleues, U2 contient 1 rouge et 4 bleues. On choisit une urne au hasard (√©quiprobable) puis on tire une boule.<br><br>
  Soit \(A =\) ¬´ boule rouge ¬ª, \(B_1 =\) ¬´ urne U1 ¬ª, \(B_2 =\) ¬´ urne U2 ¬ª.<br>
  \(P(B_1) = P(B_2) = \frac{1}{2}\),&nbsp; \(P(A \mid B_1) = \frac{3}{5}\),&nbsp; \(P(A \mid B_2) = \frac{1}{5}\).<br>
  $$P(A) = \frac{3}{5} \cdot \frac{1}{2} + \frac{1}{5} \cdot \frac{1}{2} = \frac{3}{10} + \frac{1}{10} = \frac{4}{10} = \frac{2}{5}$$
</div>

<h3 class="sous-titre" id="ch2-4">2.4 Th√©or√®me de Bayes</h3>

<div class="theoreme">
  <strong>Th√©or√®me de Bayes</strong><br>
  Dans le m√™me cadre que ci-dessus (partition \((B_i)\)), si \(P(A) > 0\) :
  $$P(B_k \mid A) = \frac{P(A \mid B_k) \cdot P(B_k)}{\displaystyle\sum_{i=1}^{n} P(A \mid B_i) \cdot P(B_i)}$$
  On appelle \(P(B_k)\) la probabilit√© <em>a priori</em> et \(P(B_k \mid A)\) la probabilit√© <em>a posteriori</em>.
</div>

<div class="exemple">
  <strong>Exemple ‚Äî Suite de l'exercice des urnes :</strong><br>
  On a tir√© une boule rouge. Quelle est la probabilit√© que ce soit l'urne U1 ?<br>
  $$P(B_1 \mid A) = \frac{P(A \mid B_1) \cdot P(B_1)}{P(A)} = \frac{\frac{3}{5} \cdot \frac{1}{2}}{\frac{2}{5}} = \frac{\frac{3}{10}}{\frac{4}{10}} = \frac{3}{4}$$
  Ayant observ√© une boule rouge, on est plus enclin √† penser que c'est l'urne U1 (75% vs 50% a priori).
</div>

<div class="remarque">
  Le th√©or√®me de Bayes est fondamental en statistiques bay√©siennes, en m√©decine (interpr√©tation des tests diagnostiques), en machine learning, et en intelligence artificielle.
</div>

<!-- Exercice Bayes -->
<div class="exercice">
  <div class="ex-titre">Exercice 2.1 ‚Äî Test m√©dical</div>
  <p>Une maladie touche 1% de la population. Un test d√©piste la maladie avec :<br>
  ‚Äî sensibilit√© : \(P(\text{test}+ \mid \text{malade}) = 95\%\)<br>
  ‚Äî sp√©cificit√© : \(P(\text{test}- \mid \text{sain}) = 90\%\)</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>Calculer \(P(\text{test positif})\).</li>
    <li>Une personne est test√©e positive. Quelle est la probabilit√© qu'elle soit r√©ellement malade ? (Ce r√©sultat vous surprend-il ?)</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    Posons \(M =\) ¬´ malade ¬ª, \(T^+ =\) ¬´ test positif ¬ª.<br>
    \(P(M) = 0.01\), \(P(\bar{M}) = 0.99\), \(P(T^+ \mid M) = 0.95\), \(P(T^+ \mid \bar{M}) = 1 - 0.90 = 0.10\).<br><br>
    <strong>1.</strong> \(P(T^+) = 0.95 \times 0.01 + 0.10 \times 0.99 = 0.0095 + 0.099 = 0.1085\)<br><br>
    <strong>2.</strong> \(P(M \mid T^+) = \dfrac{0.95 \times 0.01}{0.1085} = \dfrac{0.0095}{0.1085} \approx 8.76\%\)<br><br>
    Oui, c'est surprenant ! M√™me avec un test positif, la probabilit√© d'√™tre r√©ellement malade n'est que ~9%. En cause : la maladie est rare (1%), donc m√™me avec un taux de faux positifs de 10%, il y a beaucoup plus de faux positifs que de vrais positifs dans la population. C'est le <em>paradoxe du test de d√©pistage</em>.
  </div>
</div>

<hr class="section-sep">

<!-- ============================================================ -->
<!-- CHAPITRE 3 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch3">Chapitre 3 ‚Äî Variables al√©atoires discr√®tes</h2>

<h3 class="sous-titre" id="ch3-1">3.1 D√©finition et loi de probabilit√©</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Variable al√©atoire discr√®te</strong><br>
  Une <em>variable al√©atoire discr√®te</em> \(X\) est une fonction \(X : \Omega \to \mathbb{R}\) qui prend un nombre fini (ou d√©nombrable) de valeurs \(x_1, x_2, \ldots\)<br><br>
  Sa <em>loi de probabilit√©</em> est donn√©e par les paires \((x_k, p_k)\) avec \(p_k = P(X = x_k)\), o√π :
  $$\sum_k p_k = 1 \quad \text{et} \quad p_k \geq 0$$
</div>

<div class="exemple">
  <strong>Exemple :</strong> On lance un d√©. \(X\) = r√©sultat du d√©. La loi de \(X\) :
  <table>
    <tr><th>\(x_k\)</th><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
    <tr><th>\(P(X = x_k)\)</th><td>1/6</td><td>1/6</td><td>1/6</td><td>1/6</td><td>1/6</td><td>1/6</td></tr>
  </table>
</div>

<h3 class="sous-titre" id="ch3-2">3.2 Esp√©rance et variance</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Esp√©rance</strong><br>
  L'<em>esp√©rance</em> (ou moyenne) de \(X\) est :
  $$\mathbb{E}[X] = \sum_k x_k \cdot P(X = x_k)$$
  C'est la moyenne pond√©r√©e des valeurs, le "centre de gravit√©" de la loi.
</div>

<div class="definition">
  <strong>D√©finition ‚Äî Variance et √©cart-type</strong><br>
  La <em>variance</em> de \(X\) mesure la dispersion autour de l'esp√©rance :
  $$\text{Var}(X) = \mathbb{E}[(X - \mathbb{E}[X])^2] = \mathbb{E}[X^2] - (\mathbb{E}[X])^2$$
  L'<em>√©cart-type</em> est \(\sigma_X = \sqrt{\text{Var}(X)}\) (m√™me unit√© que \(X\)).
</div>

<div class="propriete">
  <strong>Propri√©t√©s de l'esp√©rance et de la variance</strong><br>
  Pour tous r√©els \(a, b\) et variables \(X, Y\) (ind√©pendantes pour la variance) :
  $$\mathbb{E}[aX + b] = a\mathbb{E}[X] + b$$
  $$\text{Var}(aX + b) = a^2 \text{Var}(X)$$
  $$\mathbb{E}[X + Y] = \mathbb{E}[X] + \mathbb{E}[Y]$$
  $$\text{Var}(X + Y) = \text{Var}(X) + \text{Var}(Y) \quad \text{si } X, Y \text{ ind√©pendantes}$$
</div>

<div class="exemple">
  <strong>Exemple ‚Äî D√© :</strong><br>
  \(\mathbb{E}[X] = \frac{1+2+3+4+5+6}{6} = \frac{21}{6} = 3.5\)<br>
  \(\mathbb{E}[X^2] = \frac{1+4+9+16+25+36}{6} = \frac{91}{6}\)<br>
  \(\text{Var}(X) = \frac{91}{6} - (3.5)^2 = \frac{91}{6} - \frac{49}{4} = \frac{182-147}{12} = \frac{35}{12} \approx 2.92\)<br>
  \(\sigma_X = \sqrt{35/12} \approx 1.71\)
</div>

<h3 class="sous-titre" id="ch3-3">3.3 Loi de Bernoulli et loi binomiale</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Loi de Bernoulli \(\mathcal{B}(p)\)</strong><br>
  Une variable \(X\) suit une loi de Bernoulli de param√®tre \(p \in [0,1]\) si elle vaut 1 (succ√®s) ou 0 (√©chec) :
  $$P(X=1) = p \qquad P(X=0) = 1-p = q$$
  \(\mathbb{E}[X] = p\) &nbsp;&nbsp; \(\text{Var}(X) = p(1-p) = pq\)
</div>

<div class="definition">
  <strong>D√©finition ‚Äî Loi binomiale \(\mathcal{B}(n, p)\)</strong><br>
  Si l'on r√©p√®te \(n\) fois une √©preuve de Bernoulli de param√®tre \(p\), de fa√ßon <strong>ind√©pendante</strong>, le nombre de succ√®s \(X\) suit une loi binomiale :
  $$P(X = k) = \binom{n}{k} p^k (1-p)^{n-k} \quad k \in \{0, 1, \ldots, n\}$$
  o√π \(\dbinom{n}{k} = \dfrac{n!}{k!(n-k)!}\) est le coefficient binomial.<br><br>
  \(\mathbb{E}[X] = np\) &nbsp;&nbsp; \(\text{Var}(X) = np(1-p)\)
</div>

<!-- Graphique interactif binomiale -->
<div class="chart-container">
  <canvas id="chartBinomiale"></canvas>
  <p class="chart-legende">Figure 1 ‚Äî Loi binomiale \(\mathcal{B}(20, p)\) pour diff√©rentes valeurs de \(p\)</p>
  <div style="text-align:center; margin-top:10px;">
    <label style="font-weight:600;">Param√®tre \(p\) :&nbsp;
      <input type="range" id="sliderP" min="0.05" max="0.95" step="0.05" value="0.3" style="width:180px; vertical-align:middle;">
      <span id="valP" style="color:var(--bleu); font-weight:700; min-width:30px; display:inline-block;">0.30</span>
    </label>
  </div>
</div>

<div class="exemple">
  <strong>Exemple :</strong> On tire 10 fois √† pile ou face avec une pi√®ce √©quilibr√©e. Quelle est la probabilit√© d'obtenir exactement 3 faces ?<br>
  \(X \sim \mathcal{B}(10, 0.5)\), \(P(X=3) = \dbinom{10}{3} (0.5)^3 (0.5)^7 = 120 \times (0.5)^{10} = \dfrac{120}{1024} \approx 11.7\%\)
</div>

<h3 class="sous-titre" id="ch3-4">3.4 Loi de Poisson</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Loi de Poisson \(\mathcal{P}(\lambda)\)</strong><br>
  Une variable \(X\) suit une loi de Poisson de param√®tre \(\lambda > 0\) si :
  $$P(X = k) = e^{-\lambda} \frac{\lambda^k}{k!} \quad k \in \{0, 1, 2, \ldots\}$$
  \(\mathbb{E}[X] = \lambda\) &nbsp;&nbsp; \(\text{Var}(X) = \lambda\)
</div>

<p>La loi de Poisson mod√©lise le <strong>nombre d'√©v√©nements rares sur un intervalle</strong> (temps, surface, volume) quand les √©v√©nements sont ind√©pendants et arrivent √† un taux moyen constant \(\lambda\).</p>

<div class="propriete">
  <strong>Approximation de la binomiale par Poisson</strong><br>
  Si \(n\) est grand et \(p\) petit (typiquement \(n \geq 30\), \(p \leq 0.05\)) avec \(\lambda = np\) :
  $$\mathcal{B}(n, p) \approx \mathcal{P}(\lambda = np)$$
</div>

<div class="exemple">
  <strong>Exemple :</strong> Un standard re√ßoit en moyenne 3 appels par minute. Loi de Poisson de param√®tre \(\lambda = 3\).<br>
  \(P(X = 0) = e^{-3} \approx 4.98\%\) (aucun appel)<br>
  \(P(X = 5) = e^{-3} \cdot \frac{3^5}{5!} = e^{-3} \cdot \frac{243}{120} \approx 10.08\%\)
</div>

<!-- Graphique Poisson -->
<div class="chart-container">
  <canvas id="chartPoisson"></canvas>
  <p class="chart-legende">Figure 2 ‚Äî Loi de Poisson \(\mathcal{P}(\lambda)\) pour diff√©rentes valeurs de \(\lambda\)</p>
  <div style="text-align:center; margin-top:10px;">
    <label style="font-weight:600;">\(\lambda\) :&nbsp;
      <input type="range" id="sliderLambda" min="0.5" max="10" step="0.5" value="3" style="width:180px; vertical-align:middle;">
      <span id="valLambda" style="color:var(--orange); font-weight:700; min-width:30px; display:inline-block;">3.0</span>
    </label>
  </div>
</div>

<!-- Exercice binomiale -->
<div class="exercice">
  <div class="ex-titre">Exercice 3.1 ‚Äî Contr√¥le qualit√©</div>
  <p>Dans une usine, 5% des pi√®ces produites sont d√©fectueuses. On pr√©l√®ve un lot de 20 pi√®ces.</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>Quelle loi suit le nombre \(X\) de pi√®ces d√©fectueuses dans le lot ?</li>
    <li>Calculer \(\mathbb{E}[X]\) et \(\text{Var}(X)\).</li>
    <li>Calculer \(P(X = 0)\) et \(P(X \geq 2)\).</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    <strong>1.</strong> \(X \sim \mathcal{B}(20, 0.05)\)<br><br>
    <strong>2.</strong> \(\mathbb{E}[X] = 20 \times 0.05 = 1\) &nbsp;&nbsp; \(\text{Var}(X) = 20 \times 0.05 \times 0.95 = 0.95\)<br><br>
    <strong>3.</strong><br>
    \(P(X=0) = \dbinom{20}{0}(0.05)^0(0.95)^{20} = (0.95)^{20} \approx 0.3585\)<br>
    \(P(X=1) = \dbinom{20}{1}(0.05)^1(0.95)^{19} = 20 \times 0.05 \times (0.95)^{19} \approx 0.3774\)<br>
    \(P(X \geq 2) = 1 - P(X=0) - P(X=1) \approx 1 - 0.3585 - 0.3774 = 0.2641\)
  </div>
</div>

<hr class="section-sep">

<!-- ============================================================ -->
<!-- CHAPITRE 4 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch4">Chapitre 4 ‚Äî Variables al√©atoires continues</h2>

<h3 class="sous-titre" id="ch4-1">4.1 Densit√© de probabilit√©</h3>

<p>Pour une variable continue (ex. : temps, poids, temp√©rature), \(P(X = x) = 0\) pour toute valeur pr√©cise \(x\). On travaille avec des intervalles.</p>

<div class="definition">
  <strong>D√©finition ‚Äî Densit√© de probabilit√©</strong><br>
  Une variable \(X\) est dite <em>continue</em> s'il existe une fonction \(f : \mathbb{R} \to \mathbb{R}^+\), appel√©e <em>densit√© de probabilit√©</em>, telle que :
  $$P(a \leq X \leq b) = \int_a^b f(x)\, dx$$
  \(f\) v√©rifie : \(f(x) \geq 0\) et \(\displaystyle\int_{-\infty}^{+\infty} f(x)\, dx = 1\)
</div>

<p>L'esp√©rance et la variance se calculent avec des int√©grales :</p>

<div class="formule-box">
  $$\mathbb{E}[X] = \int_{-\infty}^{+\infty} x\, f(x)\, dx \qquad \text{Var}(X) = \int_{-\infty}^{+\infty} (x - \mathbb{E}[X])^2 f(x)\, dx$$
</div>

<h3 class="sous-titre" id="ch4-2">4.2 Fonction de r√©partition</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Fonction de r√©partition (CDF)</strong><br>
  La <em>fonction de r√©partition</em> de \(X\) est :
  $$F(x) = P(X \leq x) = \int_{-\infty}^{x} f(t)\, dt$$
  Elle est croissante, continue, avec \(F(-\infty) = 0\) et \(F(+\infty) = 1\). On a \(f(x) = F'(x)\).
</div>

<div class="propriete">
  $$P(a \leq X \leq b) = F(b) - F(a) \qquad P(X > a) = 1 - F(a)$$
</div>

<h3 class="sous-titre" id="ch4-3">4.3 Loi uniforme</h3>

<div class="definition">
  <strong>Loi uniforme \(\mathcal{U}(a, b)\)</strong><br>
  \(X\) est uniform√©ment distribu√©e sur \([a, b]\) si :
  $$f(x) = \frac{1}{b-a} \quad \text{pour } x \in [a, b], \quad f(x)=0 \text{ sinon}$$
  \(\mathbb{E}[X] = \dfrac{a+b}{2}\) &nbsp;&nbsp; \(\text{Var}(X) = \dfrac{(b-a)^2}{12}\)
</div>

<h3 class="sous-titre" id="ch4-4">4.4 Loi exponentielle</h3>

<div class="definition">
  <strong>Loi exponentielle \(\mathcal{E}(\lambda)\)</strong><br>
  $$f(x) = \lambda e^{-\lambda x} \quad x \geq 0 \qquad F(x) = 1 - e^{-\lambda x}$$
  \(\mathbb{E}[X] = \dfrac{1}{\lambda}\) &nbsp;&nbsp; \(\text{Var}(X) = \dfrac{1}{\lambda^2}\)
</div>

<p>La loi exponentielle mod√©lise les <strong>dur√©es d'attente</strong> entre √©v√©nements Poissoniens. Elle poss√®de la propri√©t√© fondamentale dite <em>sans m√©moire</em> : \(P(X > s + t \mid X > s) = P(X > t)\).</p>

<div class="exercice">
  <div class="ex-titre">Exercice 4.1 ‚Äî Dur√©e d'attente</div>
  <p>Le temps d'attente aux urgences suit une loi exponentielle de param√®tre \(\lambda = 0.5\) (en heures). Donc le temps moyen d'attente est 2h.</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>Calculer la probabilit√© d'attendre moins d'1 heure.</li>
    <li>Calculer la probabilit√© d'attendre entre 1 et 3 heures.</li>
    <li>Un patient attend d√©j√† depuis 1h. Quelle est la probabilit√© qu'il attende encore plus d'1h ? (Utiliser la propri√©t√© sans m√©moire.)</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    \(\lambda = 0.5\), \(F(x) = 1 - e^{-0.5x}\)<br><br>
    <strong>1.</strong> \(P(X < 1) = 1 - e^{-0.5} \approx 1 - 0.6065 = 0.3935\) soit ~39.4%<br><br>
    <strong>2.</strong> \(P(1 \leq X \leq 3) = F(3) - F(1) = (1-e^{-1.5}) - (1-e^{-0.5}) = e^{-0.5} - e^{-1.5} \approx 0.6065 - 0.2231 = 0.3834\) soit ~38.3%<br><br>
    <strong>3.</strong> Propri√©t√© sans m√©moire : \(P(X > 1+1 \mid X > 1) = P(X > 1) = e^{-0.5} \approx 60.6\%\)
  </div>
</div>

<hr class="section-sep">

<!-- ============================================================ -->
<!-- CHAPITRE 5 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch5">Chapitre 5 ‚Äî Loi normale (gaussienne)</h2>

<p>La loi normale est la distribution la plus importante en probabilit√©s et statistiques. Elle appara√Æt naturellement d√®s que l'on additionne de nombreuses variables al√©atoires ind√©pendantes.</p>

<h3 class="sous-titre" id="ch5-1">5.1 D√©finition et param√®tres</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Loi normale \(\mathcal{N}(\mu, \sigma^2)\)</strong><br>
  Une variable \(X\) suit une loi normale de moyenne \(\mu\) et de variance \(\sigma^2\) (\(\sigma > 0\)) si sa densit√© est :
  $$f(x) = \frac{1}{\sigma\sqrt{2\pi}} \exp\left(-\frac{(x-\mu)^2}{2\sigma^2}\right) \quad x \in \mathbb{R}$$
  \(\mathbb{E}[X] = \mu\) &nbsp;&nbsp; \(\text{Var}(X) = \sigma^2\)
</div>

<p>La courbe de densit√© est la c√©l√®bre <strong>courbe en cloche</strong> (Bell curve). Elle est :</p>
<ul style="padding-left:24px; margin-bottom:14px;">
  <li>Sym√©trique autour de \(\mu\)</li>
  <li>Centr√©e en \(\mu\) (qui est aussi le mode et la m√©diane)</li>
  <li>Asymptotiquement nulle en \(\pm\infty\)</li>
  <li>Plus aplatie quand \(\sigma\) est grand (plus dispers√©e)</li>
</ul>

<!-- Graphique Normal interactif -->
<div class="chart-container">
  <canvas id="chartNormale"></canvas>
  <p class="chart-legende">Figure 3 ‚Äî Densit√© de la loi normale \(\mathcal{N}(\mu, \sigma^2)\)</p>
  <div style="text-align:center; margin-top:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:24px;">
    <label style="font-weight:600;">\(\mu\) :&nbsp;
      <input type="range" id="sliderMu" min="-3" max="3" step="0.5" value="0" style="width:120px; vertical-align:middle;">
      <span id="valMu" style="color:var(--bleu); font-weight:700; min-width:30px; display:inline-block;">0.0</span>
    </label>
    <label style="font-weight:600;">\(\sigma\) :&nbsp;
      <input type="range" id="sliderSigma" min="0.5" max="3" step="0.25" value="1" style="width:120px; vertical-align:middle;">
      <span id="valSigma" style="color:var(--orange); font-weight:700; min-width:30px; display:inline-block;">1.0</span>
    </label>
  </div>
</div>

<h3 class="sous-titre" id="ch5-2">5.2 Loi normale centr√©e r√©duite</h3>

<div class="definition">
  <strong>D√©finition ‚Äî Loi normale standard \(\mathcal{N}(0, 1)\)</strong><br>
  Si \(X \sim \mathcal{N}(\mu, \sigma^2)\), alors la variable r√©duite \(Z = \dfrac{X - \mu}{\sigma}\) suit une loi \(\mathcal{N}(0, 1)\).<br><br>
  Sa densit√© est \(\varphi(z) = \dfrac{1}{\sqrt{2\pi}} e^{-z^2/2}\) et sa fonction de r√©partition est \(\Phi(z) = P(Z \leq z)\).
</div>

<div class="propriete">
  <strong>R√®gle des 68-95-99.7 (r√®gle empirique)</strong>
  $$P(\mu - \sigma \leq X \leq \mu + \sigma) \approx 68.3\%$$
  $$P(\mu - 2\sigma \leq X \leq \mu + 2\sigma) \approx 95.4\%$$
  $$P(\mu - 3\sigma \leq X \leq \mu + 3\sigma) \approx 99.7\%$$
</div>

<!-- Graphique 68-95-99.7 -->
<div class="chart-container">
  <canvas id="chartRegle"></canvas>
  <p class="chart-legende">Figure 4 ‚Äî R√®gle des 68-95-99.7 pour la loi normale standard</p>
</div>

<h3 class="sous-titre" id="ch5-3">5.3 Calculs de probabilit√©s</h3>

<p>Pour calculer \(P(X \leq x)\) avec \(X \sim \mathcal{N}(\mu, \sigma^2)\), on <strong>standardise</strong> :</p>

<div class="formule-box">
  $$P(X \leq x) = P\!\left(Z \leq \frac{x-\mu}{\sigma}\right) = \Phi\!\left(\frac{x-\mu}{\sigma}\right)$$
  $$P(a \leq X \leq b) = \Phi\!\left(\frac{b-\mu}{\sigma}\right) - \Phi\!\left(\frac{a-\mu}{\sigma}\right)$$
</div>

<div class="propriete">
  <strong>Sym√©trie de \(\Phi\) :</strong> &nbsp;\(\Phi(-z) = 1 - \Phi(z)\)
</div>

<div class="exemple">
  <strong>Exemple :</strong> La taille des adultes masculins suit \(X \sim \mathcal{N}(176, 7^2)\) cm.<br>
  Quelle est la probabilit√© d'√™tre entre 169 et 190 cm ?<br><br>
  \(P(169 \leq X \leq 190) = \Phi\!\left(\dfrac{190-176}{7}\right) - \Phi\!\left(\dfrac{169-176}{7}\right)\)<br>
  \(= \Phi(2) - \Phi(-1) = \Phi(2) - (1-\Phi(1)) \approx 0.9772 - (1-0.8413) = 0.9772 - 0.1587 = 0.8185\)<br>
  Soit environ 81.9%.
</div>

<div class="exercice">
  <div class="ex-titre">Exercice 5.1 ‚Äî Notes d'un examen</div>
  <p>Les notes √† un examen suivent une loi normale \(\mathcal{N}(12, 9)\) (moyenne 12, variance 9, √©cart-type 3).</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>Quelle est la probabilit√© d'obtenir plus de 15 ?</li>
    <li>Quelle est la probabilit√© d'√™tre entre 9 et 15 ?</li>
    <li>Quelle est la note d√©pass√©e par seulement 10% des √©tudiants ? (Quantile √† 90%)</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    \(X \sim \mathcal{N}(12, 9)\), \(\sigma = 3\). On pose \(Z = \frac{X-12}{3}\).<br><br>
    <strong>1.</strong> \(P(X > 15) = 1 - \Phi\!\left(\frac{15-12}{3}\right) = 1 - \Phi(1) \approx 1 - 0.8413 = 0.1587\) soit ~15.9%<br><br>
    <strong>2.</strong> \(P(9 \leq X \leq 15) = \Phi(1) - \Phi(-1) = \Phi(1)-(1-\Phi(1)) = 2\Phi(1)-1 \approx 2 \times 0.8413 - 1 = 0.6826\) soit ~68.3% (r√®gle des 68% !)<br><br>
    <strong>3.</strong> On cherche \(x\) tel que \(\Phi\!\left(\frac{x-12}{3}\right) = 0.90\).<br>
    \(\Phi^{-1}(0.90) \approx 1.282\), donc \(\frac{x-12}{3} = 1.282 \Rightarrow x = 12 + 3 \times 1.282 \approx 15.85\).
  </div>
</div>

<hr class="section-sep">

<!-- ============================================================ -->
<!-- CHAPITRE 6 -->
<!-- ============================================================ -->
<h2 class="chapitre-titre" id="ch6">Chapitre 6 ‚Äî Th√©or√®me central limite</h2>

<h3 class="sous-titre" id="ch6-1">6.1 √ânonc√© et intuition</h3>

<p>Le th√©or√®me central limite (TCL) est l'un des r√©sultats les plus profonds et les plus utilis√©s en probabilit√©s. Il explique pourquoi la loi normale appara√Æt partout dans la nature.</p>

<div class="theoreme">
  <strong>Th√©or√®me Central Limite (TCL)</strong><br>
  Soient \(X_1, X_2, \ldots, X_n\) des variables al√©atoires <strong>ind√©pendantes et identiquement distribu√©es</strong> (i.i.d.), de moyenne \(\mu\) et variance \(\sigma^2 < +\infty\). Posons :
  $$\bar{X}_n = \frac{1}{n}(X_1 + \cdots + X_n)$$
  Alors, quand \(n \to +\infty\) :
  $$Z_n = \frac{\bar{X}_n - \mu}{\sigma / \sqrt{n}} \xrightarrow{\mathcal{L}} \mathcal{N}(0, 1)$$
  Autrement dit : \(\bar{X}_n \approx \mathcal{N}\!\left(\mu, \dfrac{\sigma^2}{n}\right)\) pour \(n\) grand.
</div>

<p>En pratique, on consid√®re que l'approximation est satisfaisante d√®s \(n \geq 30\) (souvent d√®s \(n \geq 20\) si la distribution originale est sym√©trique).</p>

<div class="remarque">
  <strong>Intuition :</strong> Peu importe la forme de la distribution originale de \(X_i\) (uniforme, exponentielle, binomiale‚Ä¶), la <em>somme</em> de nombreuses variables ind√©pendantes tend vers une loi normale. La moyenne des fluctuations individuelles se compense et s'√©quilibre, donnant cette courbe en cloche universelle.
</div>

<div class="propriete">
  <strong>Cons√©quences imm√©diates :</strong><br>
  ‚Äî \(\mathbb{E}[\bar{X}_n] = \mu\) : la moyenne empirique est un estimateur sans biais de \(\mu\).<br>
  ‚Äî \(\text{Var}(\bar{X}_n) = \dfrac{\sigma^2}{n}\) : la pr√©cision s'am√©liore en \(\dfrac{1}{\sqrt{n}}\).<br>
  ‚Äî Pour doubler la pr√©cision, il faut <strong>quadrupler</strong> la taille de l'√©chantillon.
</div>

<!-- Graphique TCL interactif -->
<div class="chart-container">
  <canvas id="chartTCL"></canvas>
  <p class="chart-legende">Figure 5 ‚Äî Convergence vers la normale : distribution de \(\bar{X}_n\) pour diff√©rents \(n\) (loi uniforme √† l'origine). La courbe rouge est la densit√© normale th√©orique.</p>
  <div style="text-align:center; margin-top:10px;">
    <label style="font-weight:600;">Taille \(n\) :&nbsp;
      <select id="selectN" style="padding:4px 10px; border-radius:6px; border:1px solid var(--border); font-family:inherit; font-size:0.95rem;">
        <option value="1">n = 1</option>
        <option value="2">n = 2</option>
        <option value="5">n = 5</option>
        <option value="10" selected>n = 10</option>
        <option value="30">n = 30</option>
        <option value="100">n = 100</option>
      </select>
    </label>
  </div>
</div>

<h3 class="sous-titre" id="ch6-2">6.2 Applications pratiques</h3>

<div class="exemple">
  <strong>Exemple 1 ‚Äî Intervalle de confiance :</strong><br>
  On mesure \(n=64\) poids de produits. L'√©cart-type de production est \(\sigma = 8\)g. La moyenne observ√©e est \(\bar{x} = 502\)g.<br>
  Par le TCL, \(\bar{X}_{64} \approx \mathcal{N}\!\left(\mu, \dfrac{64}{64}\right) = \mathcal{N}(\mu, 1)\).<br>
  Un intervalle de confiance √† 95% pour \(\mu\) : \(\bar{x} \pm 1.96 \times \dfrac{\sigma}{\sqrt{n}} = 502 \pm 1.96 \times 1 = [500.04\ ;\ 503.96]\).
</div>

<div class="exemple">
  <strong>Exemple 2 ‚Äî Approximation de la binomiale :</strong><br>
  \(X \sim \mathcal{B}(100, 0.4)\). Calculer \(P(35 \leq X \leq 45)\).<br>
  Par le TCL : \(\mu = np = 40\), \(\sigma^2 = npq = 24\), \(\sigma \approx 4.9\).<br>
  \(P(35 \leq X \leq 45) \approx \Phi\!\left(\dfrac{45.5-40}{4.9}\right) - \Phi\!\left(\dfrac{34.5-40}{4.9}\right)\)<br>
  \(= \Phi(1.12) - \Phi(-1.12) = 2\Phi(1.12) - 1 \approx 2 \times 0.8686 - 1 = 0.7372\) soit ~73.7%.
</div>

<div class="remarque">
  La correction de continuit√© (\(\pm 0.5\)) am√©liore l'approximation quand on approche une variable discr√®te par une variable continue.
</div>

<div class="exercice">
  <div class="ex-titre">Exercice 6.1 ‚Äî TCL en assurance</div>
  <p>Un assureur couvre 1000 clients ind√©pendants. Chaque client peut d√©clarer un sinistre dans l'ann√©e avec probabilit√© \(p = 0.1\). Le co√ªt d'un sinistre est en moyenne \(\mu_S = 2000‚Ç¨\) avec √©cart-type \(\sigma_S = 500‚Ç¨\). En l'absence de sinistre, le co√ªt est nul.</p>
  <p>Soit \(S_n\) le co√ªt total des sinistres pour les 1000 clients. Approcher par le TCL la probabilit√© que ce co√ªt d√©passe 215 000‚Ç¨.</p>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    Pour chaque client, son co√ªt individuel \(X_i\) vaut \(S\) (co√ªt du sinistre) avec probabilit√© \(p=0.1\), et \(0\) avec probabilit√© \(0.9\).<br><br>
    \(\mathbb{E}[X_i] = 0.1 \times 2000 + 0.9 \times 0 = 200‚Ç¨\)<br>
    \(\mathbb{E}[X_i^2] = 0.1 \times (\sigma_S^2 + \mu_S^2) + 0.9 \times 0 = 0.1 \times (250000 + 4000000) = 425000\)<br>
    \(\text{Var}(X_i) = 425000 - 200^2 = 425000 - 40000 = 385000\)<br>
    \(\sigma_{X_i} = \sqrt{385000} \approx 620.5‚Ç¨\)<br><br>
    \(S_{1000} = X_1 + \cdots + X_{1000}\). Par le TCL :<br>
    \(\mathbb{E}[S_{1000}] = 1000 \times 200 = 200\,000‚Ç¨\)<br>
    \(\sigma_{S_{1000}} = \sqrt{1000} \times 620.5 \approx 19\,624‚Ç¨\)<br><br>
    \(P(S_{1000} > 215\,000) \approx 1 - \Phi\!\left(\dfrac{215000-200000}{19624}\right) = 1 - \Phi(0.765) \approx 1 - 0.778 = 0.222\)<br><br>
    Il y a environ 22.2% de chances que le co√ªt total d√©passe 215 000‚Ç¨.
  </div>
</div>

<!-- Exercice final synth√®se -->
<div class="exercice">
  <div class="ex-titre">Exercice 6.2 ‚Äî Synth√®se g√©n√©rale</div>
  <p>Un distributeur automatique distribue une quantit√© de caf√© \(X\) (en mL) suivant une loi normale \(\mathcal{N}(240, 25)\).</p>
  <ol style="padding-left:20px; margin-top:8px;">
    <li>Quelle est la probabilit√© qu'une tasse contienne moins de 235 mL ?</li>
    <li>Le gobelet a une contenance de 250 mL. Quelle est la probabilit√© de d√©bordement ?</li>
    <li>On prend 36 tasses. En vertu du TCL, quelle est la loi approch√©e de la quantit√© moyenne \(\bar{X}_{36}\) ?</li>
    <li>Quelle est la probabilit√© que la moyenne sur 36 tasses soit entre 238 et 242 mL ?</li>
  </ol>
  <button class="btn-corrige" onclick="toggleCorrige(this)">Voir le corrig√©</button>
  <div class="corrige">
    \(X \sim \mathcal{N}(240, 25)\), \(\mu=240\), \(\sigma=5\).<br><br>
    <strong>1.</strong> \(P(X < 235) = \Phi\!\left(\dfrac{235-240}{5}\right) = \Phi(-1) \approx 0.1587\) soit ~15.9%<br><br>
    <strong>2.</strong> \(P(X > 250) = 1 - \Phi\!\left(\dfrac{250-240}{5}\right) = 1-\Phi(2) \approx 1-0.9772 = 0.0228\) soit ~2.3%<br><br>
    <strong>3.</strong> Par le TCL : \(\bar{X}_{36} \approx \mathcal{N}\!\left(240, \dfrac{25}{36}\right) = \mathcal{N}\!\left(240, \dfrac{25}{36}\right)\), soit \(\sigma_{\bar{X}} = \dfrac{5}{6} \approx 0.833\)<br><br>
    <strong>4.</strong> \(P(238 \leq \bar{X}_{36} \leq 242) = \Phi\!\left(\dfrac{242-240}{5/6}\right) - \Phi\!\left(\dfrac{238-240}{5/6}\right) = \Phi(2.4) - \Phi(-2.4)\)<br>
    \(= 2\Phi(2.4)-1 \approx 2 \times 0.9918 - 1 = 0.9836\) soit ~98.4%.
  </div>
</div>

<hr class="section-sep">

<!-- R√âSUM√â FINAL -->
<div style="background:linear-gradient(135deg,#0d2b5e0d,#1a4d8f08); border:2px solid #c7d8f5; border-radius:14px; padding:30px; margin:30px 0;">
  <h2 style="font-family:'Playfair Display',serif; color:var(--bleu); margin-bottom:16px;">üéØ R√©sum√© des formules cl√©s</h2>
  <table>
    <tr><th>Notion</th><th>Formule principale</th></tr>
    <tr><td>Probabilit√© classique</td><td>\(P(A) = |A|/|\Omega|\)</td></tr>
    <tr><td>Formule de Poincar√©</td><td>\(P(A\cup B) = P(A)+P(B)-P(A\cap B)\)</td></tr>
    <tr><td>Probabilit√© conditionnelle</td><td>\(P(A\mid B) = P(A\cap B)/P(B)\)</td></tr>
    <tr><td>Th√©or√®me de Bayes</td><td>\(P(B_k\mid A) = P(A\mid B_k)P(B_k)/P(A)\)</td></tr>
    <tr><td>Binomiale \(\mathcal{B}(n,p)\)</td><td>\(P(X=k)=\binom{n}{k}p^k(1-p)^{n-k}\), \(\mathbb{E}[X]=np\)</td></tr>
    <tr><td>Poisson \(\mathcal{P}(\lambda)\)</td><td>\(P(X=k)=e^{-\lambda}\lambda^k/k!\), \(\mathbb{E}[X]=\lambda\)</td></tr>
    <tr><td>Densit√© normale</td><td>\(f(x)=\frac{1}{\sigma\sqrt{2\pi}}e^{-(x-\mu)^2/(2\sigma^2)}\)</td></tr>
    <tr><td>Standardisation</td><td>\(Z=(X-\mu)/\sigma \sim \mathcal{N}(0,1)\)</td></tr>
    <tr><td>Th√©or√®me central limite</td><td>\(\bar{X}_n \approx \mathcal{N}(\mu,\sigma^2/n)\) pour \(n\) grand</td></tr>
  </table>
</div>

</main>

<footer>
  Cours de Probabilit√©s ‚Äî Du lyc√©e au sup√©rieur &nbsp;|&nbsp; R√©dig√© avec MathJax &amp; Chart.js
</footer>

<!-- ============================================================ -->
<!-- JAVASCRIPT -->
<!-- ============================================================ -->
<script>
// ---- TOGGLE CORRIG√â ----
function toggleCorrige(btn) {
  const corrige = btn.nextElementSibling;
  if (corrige.style.display === 'block') {
    corrige.style.display = 'none';
    btn.textContent = 'Voir le corrig√©';
  } else {
    corrige.style.display = 'block';
    btn.textContent = 'Masquer le corrig√©';
    // Re-render MathJax
    if (window.MathJax) MathJax.typesetPromise([corrige]);
  }
}

// ---- UTILS MATHS ----
function factorielle(n) {
  if (n <= 1) return 1;
  return n * factorielle(n - 1);
}
function coefBinom(n, k) {
  return factorielle(n) / (factorielle(k) * factorielle(n - k));
}
function poissonPMF(k, lambda) {
  return Math.exp(-lambda) * Math.pow(lambda, k) / factorielle(k);
}
function normalPDF(x, mu, sigma) {
  return (1 / (sigma * Math.sqrt(2 * Math.PI))) * Math.exp(-0.5 * Math.pow((x - mu) / sigma, 2));
}

// ---- COULEURS ----
const C_BLEU = '#1a4d8f';
const C_ORANGE = '#e67e22';
const C_VERT = '#27ae60';
const C_ROUGE = '#e74c3c';

// ===========================================================
// CHART 1 ‚Äî Binomiale interactive
// ===========================================================
const ctxBinom = document.getElementById('chartBinomiale').getContext('2d');
let p = 0.3; const n_binom = 20;

function getBinomData(p) {
  return Array.from({length: n_binom + 1}, (_, k) => coefBinom(n_binom, k) * Math.pow(p, k) * Math.pow(1 - p, n_binom - k));
}

const binomChart = new Chart(ctxBinom, {
  type: 'bar',
  data: {
    labels: Array.from({length: n_binom + 1}, (_, k) => k),
    datasets: [{
      label: 'P(X = k)',
      data: getBinomData(p),
      backgroundColor: C_BLEU + 'bb',
      borderColor: C_BLEU,
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    animation: { duration: 300 },
    plugins: { legend: { display: false }, title: { display: true, text: 'Loi Binomiale B(20, p)', font: { size: 14 } } },
    scales: {
      x: { title: { display: true, text: 'k (nombre de succ√®s)' } },
      y: { beginAtZero: true, title: { display: true, text: 'Probabilit√© P(X = k)' } }
    }
  }
});

document.getElementById('sliderP').addEventListener('input', function() {
  p = parseFloat(this.value);
  document.getElementById('valP').textContent = p.toFixed(2);
  binomChart.data.datasets[0].data = getBinomData(p);
  binomChart.data.datasets[0].label = `P(X=k), p=${p.toFixed(2)}`;
  binomChart.update();
});

// ===========================================================
// CHART 2 ‚Äî Poisson interactive
// ===========================================================
const ctxPoisson = document.getElementById('chartPoisson').getContext('2d');
let lambda = 3;

function getPoissonData(lambda, kmax) {
  return Array.from({length: kmax + 1}, (_, k) => poissonPMF(k, lambda));
}

const poissonChart = new Chart(ctxPoisson, {
  type: 'bar',
  data: {
    labels: Array.from({length: 21}, (_, k) => k),
    datasets: [{
      label: 'P(X = k)',
      data: getPoissonData(lambda, 20),
      backgroundColor: C_ORANGE + 'bb',
      borderColor: C_ORANGE,
      borderWidth: 1.5,
      borderRadius: 4
    }]
  },
  options: {
    responsive: true,
    animation: { duration: 300 },
    plugins: { legend: { display: false }, title: { display: true, text: 'Loi de Poisson P(Œª)', font: { size: 14 } } },
    scales: {
      x: { title: { display: true, text: 'k (nombre d\'√©v√©nements)' } },
      y: { beginAtZero: true, title: { display: true, text: 'Probabilit√© P(X = k)' } }
    }
  }
});

document.getElementById('sliderLambda').addEventListener('input', function() {
  lambda = parseFloat(this.value);
  document.getElementById('valLambda').textContent = lambda.toFixed(1);
  poissonChart.data.datasets[0].data = getPoissonData(lambda, 20);
  poissonChart.update();
});

// ===========================================================
// CHART 3 ‚Äî Loi normale interactive
// ===========================================================
const ctxNormale = document.getElementById('chartNormale').getContext('2d');
let mu = 0, sigma = 1;
const xs = Array.from({length: 200}, (_, i) => -6 + i * 0.06);

function getNormaleData(mu, sigma) {
  return xs.map(x => normalPDF(x, mu, sigma));
}

const normaleChart = new Chart(ctxNormale, {
  type: 'line',
  data: {
    labels: xs.map(x => x.toFixed(2)),
    datasets: [{
      label: 'Densit√© f(x)',
      data: getNormaleData(mu, sigma),
      borderColor: C_BLEU,
      backgroundColor: C_BLEU + '22',
      borderWidth: 2.5,
      fill: true,
      pointRadius: 0,
      tension: 0.4
    }]
  },
  options: {
    responsive: true,
    animation: { duration: 300 },
    plugins: { legend: { display: false }, title: { display: true, text: 'Densit√© de la loi normale N(Œº, œÉ¬≤)', font: { size: 14 } } },
    scales: {
      x: { title: { display: true, text: 'x' }, ticks: { maxTicksLimit: 13 } },
      y: { beginAtZero: true, title: { display: true, text: 'f(x)' } }
    }
  }
});

document.getElementById('sliderMu').addEventListener('input', function() {
  mu = parseFloat(this.value);
  document.getElementById('valMu').textContent = mu.toFixed(1);
  normaleChart.data.datasets[0].data = getNormaleData(mu, sigma);
  normaleChart.update();
});
document.getElementById('sliderSigma').addEventListener('input', function() {
  sigma = parseFloat(this.value);
  document.getElementById('valSigma').textContent = sigma.toFixed(2);
  normaleChart.data.datasets[0].data = getNormaleData(mu, sigma);
  normaleChart.update();
});

// ===========================================================
// CHART 4 ‚Äî R√®gle 68-95-99.7
// ===========================================================
const ctxRegle = document.getElementById('chartRegle').getContext('2d');
const xs2 = Array.from({length: 400}, (_, i) => -4 + i * 0.02);
const yPDF = xs2.map(x => normalPDF(x, 0, 1));

const colors_regle = xs2.map(x => {
  if (Math.abs(x) <= 1) return 'rgba(26,77,143,0.8)';
  if (Math.abs(x) <= 2) return 'rgba(230,126,34,0.7)';
  if (Math.abs(x) <= 3) return 'rgba(39,174,96,0.6)';
  return 'rgba(200,200,200,0.2)';
});

new Chart(ctxRegle, {
  type: 'bar',
  data: {
    labels: xs2.map(x => x.toFixed(2)),
    datasets: [{
      label: 'Densit√©',
      data: yPDF,
      backgroundColor: colors_regle,
      borderColor: 'transparent',
      barPercentage: 1.0,
      categoryPercentage: 1.0
    }]
  },
  options: {
    responsive: true,
    animation: { duration: 0 },
    plugins: {
      legend: { display: false },
      title: { display: true, text: '68-95-99.7 : Bleu = ¬±1œÉ | Orange = ¬±2œÉ | Vert = ¬±3œÉ', font: { size: 13 } }
    },
    scales: {
      x: { title: { display: true, text: 'z (unit√©s d\'√©cart-type)' }, ticks: { maxTicksLimit: 9 } },
      y: { beginAtZero: true, title: { display: true, text: 'œÜ(z)' } }
    }
  }
});

// ===========================================================
// CHART 5 ‚Äî TCL : simulation visuelle
// ===========================================================
const ctxTCL = document.getElementById('chartTCL').getContext('2d');

function simulateTCLMeans(n, nbSim = 5000) {
  const means = [];
  for (let s = 0; s < nbSim; s++) {
    let sum = 0;
    for (let i = 0; i < n; i++) sum += Math.random(); // Uniforme [0,1]
    means.push(sum / n);
  }
  return means;
}

function getMeansHistogram(means, bins = 40) {
  const min = 0, max = 1;
  const binSize = (max - min) / bins;
  const counts = new Array(bins).fill(0);
  means.forEach(m => {
    const idx = Math.min(Math.floor((m - min) / binSize), bins - 1);
    counts[idx]++;
  });
  const labels = Array.from({length: bins}, (_, i) => (min + (i + 0.5) * binSize).toFixed(3));
  // Normalize to density
  const density = counts.map(c => c / (means.length * binSize));
  return { labels, density };
}

function getNormOverlay(n, bins = 40) {
  const mu_th = 0.5;
  const sigma_th = Math.sqrt(1/12) / Math.sqrt(n);
  const binSize = 1 / bins;
  return Array.from({length: bins}, (_, i) => {
    const x = 0 + (i + 0.5) * binSize;
    return normalPDF(x, mu_th, sigma_th);
  });
}

let currentN = 10;
let tclChart = null;

function buildTCL(n) {
  const means = simulateTCLMeans(n, 8000);
  const { labels, density } = getMeansHistogram(means, 40);
  const normOverlay = getNormOverlay(n, 40);

  if (tclChart) tclChart.destroy();
  tclChart = new Chart(ctxTCL, {
    data: {
      labels,
      datasets: [
        {
          type: 'bar',
          label: 'Histogramme simul√©',
          data: density,
          backgroundColor: C_BLEU + '88',
          borderColor: C_BLEU + 'aa',
          borderWidth: 1,
          barPercentage: 1.0,
          categoryPercentage: 1.0
        },
        {
          type: 'line',
          label: 'Normale th√©orique',
          data: normOverlay,
          borderColor: C_ROUGE,
          borderWidth: 2.5,
          pointRadius: 0,
          fill: false,
          tension: 0.4
        }
      ]
    },
    options: {
      responsive: true,
      animation: { duration: 400 },
      plugins: {
        legend: { position: 'top' },
        title: { display: true, text: `Distribution de XÃÑ‚Çô (n=${n}, loi uniforme U[0,1])`, font: { size: 13 } }
      },
      scales: {
        x: { title: { display: true, text: 'Valeur de la moyenne' }, ticks: { maxTicksLimit: 10 } },
        y: { beginAtZero: true, title: { display: true, text: 'Densit√©' } }
      }
    }
  });
}

buildTCL(currentN);

document.getElementById('selectN').addEventListener('change', function() {
  buildTCL(parseInt(this.value));
});
</script>

</body>
</html>
